-----------------------------------------------------------------------------
Описание
-----------------------------------------------------------------------------
Редактор состоит из двух частей - левой и правой. 
Левая часть представляет собой 2д пространство и в ней производится редактирование карты
Правая - это 3д пространство просмотра

Термины:
- точка - основной элемент редактора
- стена - две точки соединяются в стену
- сектор - три и более стен соединяются в сектор, если последняя размещенная точка равна первой (замкнутость)
- слои - обычно в подобных редакторах в 2д виде есть только один слой. Что неудобно на сложных картах, когда разные по высоте сектора накрывают друг друга. Слои позволяют делать сектора по высоте - например сделать многоэтажку. Чем-то похожи на высоту в DF

-----------------------------------------------------------------------------
Задачи:
-----------------------------------------------------------------------------
* - помечаются интересные задачи которые я пока не буду делать, но возможно в будущем

Текстурный атлас:
- сделать пул текстур которые используются в редакторе и рендере мира. В идеале это может быть просто один атлас, а не массив текстур

Основное гуи:
- при нажатии таба показывает или скрывает основной гуи (при этом гуи для редактирования могут открываться сами по контексту)
- в этом гуи есть меню по работе с картой, меню информации о карте (кол-во секторов, размеры и т.д.) и меню для настройки нового сектора (где можно сразу задать текстуры и высоты)

Работа с картой:
- в основном гуи возможность создать карту, загрузить карту, сохранить карту.
- при создании возможность указать размер и кол-во слоев. А также коэффициент масштаба - дело в том что редактор работает с числами от 1 до х.Что довольно много при преобразовании в 3д вид (когда расстояние между точками минимум 0.5 метр). Возможность указать общий скейл карты чтобы нормально рендерить... Хотя возможно это должно быть не в карте, а в настройках проекта

Навигация и вид:
- режим (mode) - режим создания секторов
- четкая линия между левой и правой панелями
- движение в 2д пространстве с помощью зажатой кнопки мыши (возможно правой). Сейчас для этого используется WASD
- возможность сдвигать границу левой и правой частей
- * возможность открытия только левой или только правой частей
- * возможность открытия левой/правой частей в виде плавающего окна поверх другой части
- (ошибка) при переключении из 3д в 2д я делаю мисклик. Возможно игнорировать первый щелчок мыши
- * возможно вместо левой кнопки для размещения точек использовать пробел как в билдэнджине
- регулирование масштаба карты в 2д
- регулирование размера сетки в 2д
- возможность включения линий указателя (сейчас в точке указателя рисуется крестик, сделать возможность чтобы также рисовались две линии - вертикальная и горизонтальная от края карты до края. иногда такое удобно, когда надо размещать по линейке. принцип тут - https://www.youtube.com/watch?v=d6Do1a6Bs4Y&t=3s)
- слои карты по высоте
- в 3д пространстве возможность выбора стен, пола или потолка и некоторые возможности их редактирования (например высоты)
- в 3д пространстве выделять стены/пол/потолок на который смотрит камера.
- в 3д при нажатии пробела выбирает то на что смотрит камера (и что выделено). Повторное нажатие пробела снимает выделение
- рисовать зеленой линией стену от последней точки до указателя (для представления как оно будет отрисовано)
- в 3д рендер в реальном времени: показывать где сейчас указатель мыши и где поставлена точка без стен; рисовать поставленные стены без сектора 

Инструменты:
- * сектора из примитивов - линии, треугольники, многоугольники, круги (левая панель в GZDOOM BUILDER)


Точки
		(ГОТОВО) отмена последней точки. Backspace убирает последнюю точку пока рисуется сектор
- при создании сектора помечать первую точку другим цветом
- движение точки если зажать левую кнопку на точке, ее можно двигать. При этом это работает и при создании нового сектора, и на старых секторах

Стены:
		(ГОТОВО) стены одного сектора не должны пересекаться - проверять на столкновение стен. При этом зеленая линия меняется на красную говоря что тут точку ставить нельзя
- у стен могут быть разные текстуры
- у стены может быть три текстуры - Upper, Middle, Lower. По умолчанию текстура пишется в Middle, две другие опциональны, позволяют делать всякие углы
- у стены будет 4 unsigned поля в которые можно писать какие-то особенности для скриптинга
- возможность указать что стена невидима
- * если стены двух секторов накладываются то меньшая получает флаг невидимости, а большая режется на части.
- * возможность применения патерна на стену (например окна, дыры и и т.д.)
- выделение стены в 2д. если сейчас не рисуется сектор, то при наведении указателя на стену выделять ее.
- при щелчке на выделенную стену выбирать ее и открывать гуи редактор стены
- * возможность двигать выбранную стену
- возможность добавления в выбранной стене новой точки (возможно так - игрок наводит мышь на стену, нажимает правую кнопку - там ставится точка)

Сектор:
- позиция сектора. при конструировании сектора нужно чтобы вычислялась его позиция по центру аабб, а все стены пересчитывались от этого центра (но в редакторах показывать позицию как от центра сектора, так и мировую)
- выбор сектора в 2д - если не рисуется сектор, и указатель мыши внутри сектора, то нажатие ПРАВОЙ кнопки мыши выберет этот сектор и покажет редактор сектора
- возможность двигать выбранный сектор зажатой кнопной мыши
- del при выбранном секторе удалит его (но показывать окно с вопросом о подтверждении)
- * в 2д при рендере сектора каким-нибудь бледно серым отрисовать его площадь (возможно опционально)
- * возможность мержить сектора в один (Merge sectors) - работает когда два сектора касаются друг друга
- * возможность связать сектора (Join sectors) - любые два сектора связываются-  теперь любые изменения одного из них влияют на другой
- * возможность булевых операций над секторами


Редактирование в 3д:
- при выбраном поле/потолке колесиком мыши можно регулировать высоту. Стрелки позволяют менять UV(влево-вправо меняет U, вверх-вниз меняет V), стрелки с ctrl - вращение текстуры влево/вправо. Q/E - выбрать след/пред текстуру из атласа
- при выбраной стене колесиком мыши можно отодвигать/приближать стену от зрителя. Стрелки позволяют менять UV(влево-вправо меняет U, вверх-вниз меняет V), стрелки с ctrl - вращение текстуры влево/вправо. Q/E - выбрать след/пред текстуру из атласа
- при выделенной/выбранной стене/поле/потолке правая кнопка мыши вызывает гуи редактора стен/пола/потолка
- копирование текстуры со стены/пола/потолка на другую - выделить посмотрев на нужный элмент или выбрать. Нажать ctrl-c. Выделить/выбрать целевой элемент - нажать ctrl-v - текстура будет вставлена туда (а что с высотами и другими свойствами?)

Генерация меша секторов:
- (ошибка) генерировать меш только когда произведены изменения. Сейчас он генерируется каждый кадр


-----------------------------------------------------------------------------
Рабочее
-----------------------------------------------------------------------------


-----------------------------------------------------------------------------
Разные идеи:
-----------------------------------------------------------------------------
как в текущей реализации рисовать басейн (стоит помнить что сейчас все в 2д)
	рисуется два сектора в виде Г. их высота 1-2. Это бордюр. в центре рисуется квадрат - это вода. Смотреть скрин ideaEditor001.png
	в будущем сделать возможность рисования сектора с дырами внутри